

# *************************************************************************************************************************************************
# --------------------------------------------------------------------------------------------------------------------------------------
# Wait for Zen in Common Services being ready
# --------------------------------------------------------------------------------------------------------------------------------------
# *************************************************************************************************************************************************



- name: Log
  shell: |
    export MESSAGE=" ðŸŸ£ðŸŸ£âœ… Done {{current_cp4waiops_feature.kind}} Install - {{role_name}}"
    export currentDate=$(date +%Y-%m-%d_%H:%M)
    echo $currentDate" - "$MESSAGE  >> ../install_{{current_cp4waiops_feature.kind}}.log

    cat <<EOF | oc apply -f -
    apiVersion: console.openshift.io/v1
    kind: ConsoleNotification
    metadata:
      name: cp4waiops-notification
    spec:
      backgroundColor: '#ffd500'
      color: '#000'
      location: BannerTop
      text: 'Installing CP4WAIOPS: xxxxx'    
    EOF



    echo "**********************************************************************************************************************************************************" >> ../install_{{current_cp4waiops_feature.kind}}.log
    echo "**********************************************************************************************************************************************************" >> ../install_{{current_cp4waiops_feature.kind}}.log
    echo "" >> ../install_{{current_cp4waiops_feature.kind}}.log
  ignore_errors: true


